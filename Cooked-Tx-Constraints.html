<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Cooked.Tx.Constraints</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">cooked-validators-0.2.0</span><ul class="links" id="page-menu"><li><a href="src/Cooked.Tx.Constraints.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Cooked.Tx.Constraints</p></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short">module <a href="Cooked-Tx-Constraints-Type.html">Cooked.Tx.Constraints.Type</a></li><li class="src short">module <a href="Cooked-Tx-Constraints-Pretty.html">Cooked.Tx.Constraints.Pretty</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:LedgerConstraint">LedgerConstraint</a> a = (ScriptLookups a, TxConstraints (RedeemerType a) (DatumType a))</li><li class="src short"><a href="#v:extractDatumStr">extractDatumStr</a> :: ToLedgerConstraint constraint =&gt; constraint -&gt; <a href="http://hackage.haskell.org/packages/archive/Cabal/latest/doc/html/Distribution-Compat-Prelude-Internal.html#t:Map" title="Distribution.Compat.Prelude.Internal">Map</a> DatumHash <a href="http://hackage.haskell.org/packages/archive/Cabal/latest/doc/html/Distribution-Compat-Prelude-Internal.html#t:String" title="Distribution.Compat.Prelude.Internal">String</a></li><li class="src short"><a href="#v:signedByWallets">signedByWallets</a> :: [<a href="Cooked-MockChain-Wallet.html#t:Wallet" title="Cooked.MockChain.Wallet">Wallet</a>] -&gt; <a href="Cooked-Tx-Constraints-Type.html#t:MiscConstraint" title="Cooked.Tx.Constraints.Type">MiscConstraint</a></li><li class="src short"><a href="#v:toLedgerConstraint">toLedgerConstraint</a> :: ToLedgerConstraint constraint =&gt; constraint -&gt; <a href="Cooked-Tx-Constraints.html#t:LedgerConstraint" title="Cooked.Tx.Constraints">LedgerConstraint</a> a</li><li class="src short"><a href="#v:orderTxOutputs">orderTxOutputs</a> :: [<a href="Cooked-Tx-Constraints-Type.html#t:OutConstraint" title="Cooked.Tx.Constraints.Type">OutConstraint</a>] -&gt; [TxOut] -&gt; [TxOut]</li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src">module <a href="Cooked-Tx-Constraints-Type.html">Cooked.Tx.Constraints.Type</a></p></div><div class="top"><p class="src">module <a href="Cooked-Tx-Constraints-Pretty.html">Cooked.Tx.Constraints.Pretty</a></p></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:LedgerConstraint" class="def">LedgerConstraint</a> a = (ScriptLookups a, TxConstraints (RedeemerType a) (DatumType a)) <a href="src/Cooked.Tx.Constraints.html#LedgerConstraint" class="link">Source</a> <a href="#t:LedgerConstraint" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:extractDatumStr" class="def">extractDatumStr</a> :: ToLedgerConstraint constraint =&gt; constraint -&gt; <a href="http://hackage.haskell.org/packages/archive/Cabal/latest/doc/html/Distribution-Compat-Prelude-Internal.html#t:Map" title="Distribution.Compat.Prelude.Internal">Map</a> DatumHash <a href="http://hackage.haskell.org/packages/archive/Cabal/latest/doc/html/Distribution-Compat-Prelude-Internal.html#t:String" title="Distribution.Compat.Prelude.Internal">String</a> <a href="src/Cooked.Tx.Constraints.html#extractDatumStr" class="link">Source</a> <a href="#v:extractDatumStr" class="selflink">#</a></p><div class="doc"><p>Map from datum hashes to string representation of all the datums carried.
 We use this in order to display data to the use when testing. Its often
 easier to read the original datatype that was placed into a UTxO
 instead of its respective <code>toBuilinData</code> image.</p></div></div><div class="top"><p class="src"><a id="v:signedByWallets" class="def">signedByWallets</a> :: [<a href="Cooked-MockChain-Wallet.html#t:Wallet" title="Cooked.MockChain.Wallet">Wallet</a>] -&gt; <a href="Cooked-Tx-Constraints-Type.html#t:MiscConstraint" title="Cooked.Tx.Constraints.Type">MiscConstraint</a> <a href="src/Cooked.Tx.Constraints.html#signedByWallets" class="link">Source</a> <a href="#v:signedByWallets" class="selflink">#</a></p><div class="doc"><pre>signedByWallets ws == SignedBy $ map walletPKHash ws</pre></div></div><div class="top"><p class="src"><a id="v:toLedgerConstraint" class="def">toLedgerConstraint</a> :: ToLedgerConstraint constraint =&gt; constraint -&gt; <a href="Cooked-Tx-Constraints.html#t:LedgerConstraint" title="Cooked.Tx.Constraints">LedgerConstraint</a> a <a href="src/Cooked.Tx.Constraints.html#toLedgerConstraint" class="link">Source</a> <a href="#v:toLedgerConstraint" class="selflink">#</a></p><div class="doc"><p>Converts our constraint into a <code><a href="Cooked-Tx-Constraints.html#t:LedgerConstraint" title="Cooked.Tx.Constraints">LedgerConstraint</a></code>,
  which later can be used to generate a transaction. The universally
  quantified type-variable is there on purpose, to enable us to
  easily spend from multiple scripts at the same time.</p></div></div><div class="top"><p class="src"><a id="v:orderTxOutputs" class="def">orderTxOutputs</a> :: [<a href="Cooked-Tx-Constraints-Type.html#t:OutConstraint" title="Cooked.Tx.Constraints.Type">OutConstraint</a>] -&gt; [TxOut] -&gt; [TxOut] <a href="src/Cooked.Tx.Constraints.html#orderTxOutputs" class="link">Source</a> <a href="#v:orderTxOutputs" class="selflink">#</a></p><div class="doc"><p>Reorders the outputs of a transaction according to the ordered list of
 output constraints that generate them. Fails in case of mismatch. The
 reordered outputs are put at the beginning of the list.
 orderTxOutputs :: MonadFail m =&gt; [OutConstraint] -&gt; [Pl.TxOut] -&gt; m [Pl.TxOut]
 -- TODO Check staking credentials
 orderTxOutputs [] txOuts = return txOuts
 orderTxOutputs (oc : ocs) txOuts =
   case findGeneratedTxOutput oc txOuts of
     Nothing -&gt;
       fail $
         &quot;Could not locate output corresponding to constraint &quot;
           &lt;&gt; show (prettyOutConstraint oc)
     Just txOut -&gt; (txOut :) <a href="$">$</a> orderTxOutputs ocs (List.delete txOut txOuts)</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.24.0</p></div></body></html>