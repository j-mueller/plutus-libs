<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Cooked.Tx.Balance</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">cooked-validators-0.2.0</span><ul class="links" id="page-menu"><li><a href="src/Cooked.Tx.Balance.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Cooked.Tx.Balance</p></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">class</span> (<a href="http://hackage.haskell.org/packages/archive/Cabal/latest/doc/html/Distribution-Compat-Prelude-Internal.html#t:Show" title="Distribution.Compat.Prelude.Internal">Show</a> out, <a href="http://hackage.haskell.org/packages/archive/Cabal/latest/doc/html/Distribution-Compat-Prelude-Internal.html#t:Show" title="Distribution.Compat.Prelude.Internal">Show</a> (<a href="Cooked-Tx-Balance.html#t:BOutRef" title="Cooked.Tx.Balance">BOutRef</a> out), <a href="http://hackage.haskell.org/packages/archive/Cabal/latest/doc/html/Distribution-Compat-Prelude-Internal.html#t:Eq" title="Distribution.Compat.Prelude.Internal">Eq</a> (<a href="Cooked-Tx-Balance.html#t:BOutRef" title="Cooked.Tx.Balance">BOutRef</a> out)) =&gt; <a href="#t:BalancableOut">BalancableOut</a> out <span class="keyword">where</span><ul class="subs"><li><span class="keyword">type</span> <a href="#t:BOutRef">BOutRef</a> out = (result :: <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Kind.html#t:Type" title="Data.Kind">Type</a>) <span class="keyword">|</span> result -&gt; out</li><li><a href="#v:outValue">outValue</a> :: out -&gt; Value</li><li><a href="#v:outRef">outRef</a> :: out -&gt; <a href="Cooked-Tx-Balance.html#t:BOutRef" title="Cooked.Tx.Balance">BOutRef</a> out</li></ul></li><li class="src short"><a href="#v:balanceWithUTxOs">balanceWithUTxOs</a> :: <span class="keyword">forall</span> out. <a href="Cooked-Tx-Balance.html#t:BalancableOut" title="Cooked.Tx.Balance">BalancableOut</a> out =&gt; Value -&gt; [out] -&gt; ([<a href="Cooked-Tx-Balance.html#t:BOutRef" title="Cooked.Tx.Balance">BOutRef</a> out], Value, <a href="Cooked-Tx-Balance.html#t:ExcessiveValue" title="Cooked.Tx.Balance">ExcessiveValue</a>)</li><li class="src short"><span class="keyword">type</span> <a href="#t:ExcessiveValue">ExcessiveValue</a> = Value</li><li class="src short"><a href="#v:spendValueFrom">spendValueFrom</a> :: <span class="keyword">forall</span> out. <a href="Cooked-Tx-Balance.html#t:BalancableOut" title="Cooked.Tx.Balance">BalancableOut</a> out =&gt; Value -&gt; [out] -&gt; ([<a href="Cooked-Tx-Balance.html#t:BOutRef" title="Cooked.Tx.Balance">BOutRef</a> out], Value, <a href="Cooked-Tx-Balance.html#t:ExcessiveValue" title="Cooked.Tx.Balance">ExcessiveValue</a>)</li><li class="src short"><a href="#v:necessaryUtxosFor">necessaryUtxosFor</a> :: <a href="Cooked-Tx-Balance.html#t:BalancableOut" title="Cooked.Tx.Balance">BalancableOut</a> out =&gt; CurrencySymbol -&gt; TokenName -&gt; <a href="http://hackage.haskell.org/packages/archive/Cabal/latest/doc/html/Distribution-Compat-Prelude-Internal.html#t:Integer" title="Distribution.Compat.Prelude.Internal">Integer</a> -&gt; [out] -&gt; [<a href="Cooked-Tx-Balance.html#t:BOutRef" title="Cooked.Tx.Balance">BOutRef</a> out] -&gt; ([<a href="Cooked-Tx-Balance.html#t:BOutRef" title="Cooked.Tx.Balance">BOutRef</a> out], Value)</li><li class="src short"><a href="#v:singletonValue">singletonValue</a> :: CurrencySymbol -&gt; TokenName -&gt; <a href="http://hackage.haskell.org/packages/archive/Cabal/latest/doc/html/Distribution-Compat-Prelude-Internal.html#t:Integer" title="Distribution.Compat.Prelude.Internal">Integer</a> -&gt; Value</li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">class</span> (<a href="http://hackage.haskell.org/packages/archive/Cabal/latest/doc/html/Distribution-Compat-Prelude-Internal.html#t:Show" title="Distribution.Compat.Prelude.Internal">Show</a> out, <a href="http://hackage.haskell.org/packages/archive/Cabal/latest/doc/html/Distribution-Compat-Prelude-Internal.html#t:Show" title="Distribution.Compat.Prelude.Internal">Show</a> (<a href="Cooked-Tx-Balance.html#t:BOutRef" title="Cooked.Tx.Balance">BOutRef</a> out), <a href="http://hackage.haskell.org/packages/archive/Cabal/latest/doc/html/Distribution-Compat-Prelude-Internal.html#t:Eq" title="Distribution.Compat.Prelude.Internal">Eq</a> (<a href="Cooked-Tx-Balance.html#t:BOutRef" title="Cooked.Tx.Balance">BOutRef</a> out)) =&gt; <a id="t:BalancableOut" class="def">BalancableOut</a> out <span class="keyword">where</span> <a href="src/Cooked.Tx.Balance.html#BalancableOut" class="link">Source</a> <a href="#t:BalancableOut" class="selflink">#</a></p><div class="subs associated-types"><p class="caption">Associated Types</p><p class="src"><span class="keyword">type</span> <a id="t:BOutRef" class="def">BOutRef</a> out = (result :: <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Kind.html#t:Type" title="Data.Kind">Type</a>) <span class="keyword">|</span> result -&gt; out <a href="src/Cooked.Tx.Balance.html#BOutRef" class="link">Source</a> <a href="#t:BOutRef" class="selflink">#</a></p><div class="doc"><p>The <code><a href="Cooked-Tx-Balance.html#t:BOutRef" title="Cooked.Tx.Balance">BOutRef</a></code>s are only used to keep track of what outputs were used during balancing.
 They might as well be identity (type) functions if <code>out</code> is cheap and comparable.</p></div></div><div class="subs methods"><p class="caption">Methods</p><p class="src"><a id="v:outValue" class="def">outValue</a> :: out -&gt; Value <a href="src/Cooked.Tx.Balance.html#outValue" class="link">Source</a> <a href="#v:outValue" class="selflink">#</a></p><p class="src"><a id="v:outRef" class="def">outRef</a> :: out -&gt; <a href="Cooked-Tx-Balance.html#t:BOutRef" title="Cooked.Tx.Balance">BOutRef</a> out <a href="src/Cooked.Tx.Balance.html#outRef" class="link">Source</a> <a href="#v:outRef" class="selflink">#</a></p></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:BalancableOut">Instances</h4><details id="i:BalancableOut" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:BalancableOut:BalancableOut:1"></span> <a href="Cooked-Tx-Balance.html#t:BalancableOut" title="Cooked.Tx.Balance">BalancableOut</a> (TxOutRef, TxOut)</span> <a href="src/Cooked.Tx.Balance.html#line-27" class="link">Source</a> <a href="#t:BalancableOut" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:BalancableOut:BalancableOut:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Cooked-Tx-Balance.html">Cooked.Tx.Balance</a></p> <div class="subs associated-types"><p class="caption">Associated Types</p><p class="src"><span class="keyword">type</span> <a href="Cooked-Tx-Balance.html#t:BOutRef" title="Cooked.Tx.Balance">BOutRef</a> (TxOutRef, TxOut) = (result :: <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Kind.html#t:Type" title="Data.Kind">Type</a>) <a href="src/Cooked.Tx.Balance.html#BOutRef" class="link">Source</a> <a href="#t:BOutRef" class="selflink">#</a></p></div> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:outValue">outValue</a> :: (TxOutRef, TxOut) -&gt; Value <a href="src/Cooked.Tx.Balance.html#outValue" class="link">Source</a> <a href="#v:outValue" class="selflink">#</a></p><p class="src"><a href="#v:outRef">outRef</a> :: (TxOutRef, TxOut) -&gt; <a href="Cooked-Tx-Balance.html#t:BOutRef" title="Cooked.Tx.Balance">BOutRef</a> (TxOutRef, TxOut) <a href="src/Cooked.Tx.Balance.html#outRef" class="link">Source</a> <a href="#v:outRef" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:balanceWithUTxOs" class="def">balanceWithUTxOs</a> :: <span class="keyword">forall</span> out. <a href="Cooked-Tx-Balance.html#t:BalancableOut" title="Cooked.Tx.Balance">BalancableOut</a> out =&gt; Value -&gt; [out] -&gt; ([<a href="Cooked-Tx-Balance.html#t:BOutRef" title="Cooked.Tx.Balance">BOutRef</a> out], Value, <a href="Cooked-Tx-Balance.html#t:ExcessiveValue" title="Cooked.Tx.Balance">ExcessiveValue</a>) <a href="src/Cooked.Tx.Balance.html#balanceWithUTxOs" class="link">Source</a> <a href="#v:balanceWithUTxOs" class="selflink">#</a></p><div class="doc"><p>This function will try to select a selection of outputs from the set of available
  outputs given to it in order to have enough to balance out the given value.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:ExcessiveValue" class="def">ExcessiveValue</a> = Value <a href="src/Cooked.Tx.Balance.html#ExcessiveValue" class="link">Source</a> <a href="#t:ExcessiveValue" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:spendValueFrom" class="def">spendValueFrom</a> :: <span class="keyword">forall</span> out. <a href="Cooked-Tx-Balance.html#t:BalancableOut" title="Cooked.Tx.Balance">BalancableOut</a> out =&gt; Value -&gt; [out] -&gt; ([<a href="Cooked-Tx-Balance.html#t:BOutRef" title="Cooked.Tx.Balance">BOutRef</a> out], Value, <a href="Cooked-Tx-Balance.html#t:ExcessiveValue" title="Cooked.Tx.Balance">ExcessiveValue</a>) <a href="src/Cooked.Tx.Balance.html#spendValueFrom" class="link">Source</a> <a href="#v:spendValueFrom" class="selflink">#</a></p><div class="doc"><p>A helper to make sure that <code>input + mint = output + fees</code> holds for a transaction.</p><p>Namely, <code>val</code> is <code>output - input</code>, and <code>utxos</code> is the list of the unspent outputs
 that can be used to balance the transaction.</p><p>If a token value in <code>val</code> is negative,
 it means that the transaction got more of that token as input than as output.
 We don't balance it in this case,
 since we don't want to (and can't, really) choose where that extra output goes.</p><p>This function returns the UTXOs that were spent (a subset of <code>utxos</code>), any leftover value
 (in case some UTXOs had more output than we actually need to balance the transaction)
 and the excess value which needs to be routed somewhere.</p></div></div><div class="top"><p class="src"><a id="v:necessaryUtxosFor" class="def">necessaryUtxosFor</a> :: <a href="Cooked-Tx-Balance.html#t:BalancableOut" title="Cooked.Tx.Balance">BalancableOut</a> out =&gt; CurrencySymbol -&gt; TokenName -&gt; <a href="http://hackage.haskell.org/packages/archive/Cabal/latest/doc/html/Distribution-Compat-Prelude-Internal.html#t:Integer" title="Distribution.Compat.Prelude.Internal">Integer</a> -&gt; [out] -&gt; [<a href="Cooked-Tx-Balance.html#t:BOutRef" title="Cooked.Tx.Balance">BOutRef</a> out] -&gt; ([<a href="Cooked-Tx-Balance.html#t:BOutRef" title="Cooked.Tx.Balance">BOutRef</a> out], Value) <a href="src/Cooked.Tx.Balance.html#necessaryUtxosFor" class="link">Source</a> <a href="#v:necessaryUtxosFor" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:singletonValue" class="def">singletonValue</a> :: CurrencySymbol -&gt; TokenName -&gt; <a href="http://hackage.haskell.org/packages/archive/Cabal/latest/doc/html/Distribution-Compat-Prelude-Internal.html#t:Integer" title="Distribution.Compat.Prelude.Internal">Integer</a> -&gt; Value <a href="src/Cooked.Tx.Balance.html#singletonValue" class="link">Source</a> <a href="#v:singletonValue" class="selflink">#</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.24.0</p></div></body></html>